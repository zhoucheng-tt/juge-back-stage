/**
* @author admin
* @since 2021-03-29
* @data 2021-03-29
*/
<template>
  <div class="mainBody">
<!--    class="backBody"-->
    <div >
      <svg width="320px" height="192px" viewBox="0 0 320 192" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink">
        <title></title>
        <defs>
          <polygon id="path-1" points="0 0.000177156177 19.2451133 0.000177156177 19.2451133 19.9826853 0 19.9826853"></polygon>
        </defs>
        <g id="智能停车备份-3" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd">
          <g id="编组-4" transform="translate(0.000000, -0.000000)">
            <g id="编组-2">
              <rect id="矩形" fill="#000000" transform="translate(160.000000, 96.000000) rotate(-90.000000) translate(-160.000000, -96.000000) " x="64" y="-64" width="192" height="320"></rect>
              <g id="icon/park" transform="translate(23.000000, 144.000000)">
                <rect id="矩形" stroke="#FFFFFF" fill="#00A8FF" x="0" y="0" width="24" height="24" rx="2"></rect>
                <g id="编组" transform="translate(5.000000, 5.000000)" fill="#FFFFFF">
                  <path d="M5.21184174,5.62853184 L2.00390328,5.62853184 L2.00390328,1.96256536 L5.21192072,1.96256536 C6.14966226,2.00612961 7.00929815,2.85535866 7.00929815,3.78029721 C7.00929815,4.70523575 6.14958328,5.58457654 5.21184174,5.62853184 M9.40695969,3.80172737 C9.40695969,1.70618547 7.66486431,0.00757094972 5.51573508,0.00757094972 C5.41788585,0.00757094972 5.32185303,0.0148446927 5.22574123,0.0218055866 L1.78838226,0.0218055866 L1.78838226,0.0290011173 L0.0297022564,0.0290011173 L0.0297022564,13.9377274 L2.00390328,13.9377274 L2.00390328,7.58376089 L5.21192072,7.58376089 C5.36252482,7.60088939 5.36070841,7.59596201 5.51581405,7.59596201 C7.66494328,7.5958838 9.40695969,5.8974257 9.40695969,3.80172737" id="Fill-2"></path>
                  <path d="M12.9748554,12.0662324 C12.6630646,12.0662324 12.4090041,11.8142324 12.4090041,11.5061542 C12.4090041,11.1973721 12.6630646,10.946076 12.9748554,10.946076 C13.2863303,10.946076 13.5401538,11.1973721 13.5401538,11.5061542 C13.5401538,11.8143106 13.2863303,12.0662324 12.9748554,12.0662324 M8.32421333,12.0662324 C8.01210667,12.0662324 7.75836205,11.8142324 7.75836205,11.5061542 C7.75836205,11.1973721 8.01210667,10.946076 8.32421333,10.946076 C8.63576718,10.946076 8.88943289,11.1973721 8.88943289,11.5061542 C8.88959077,11.8143106 8.63584615,12.0662324 8.32421333,12.0662324 M8.24808205,10.0284894 C8.27746051,9.92227709 8.47418564,9.0899419 8.56129436,8.80157318 C8.59714872,8.70193073 8.8300441,8.4051933 9.1017159,8.42208715 L12.1798995,8.42208715 C12.4514133,8.40511508 12.6845456,8.70185251 12.7197682,8.80157318 C12.8072718,9.0899419 13.003681,9.92227709 13.0334544,10.0284894 C13.068519,10.1546458 12.9528215,10.1436179 12.9528215,10.1436179 L8.32879385,10.1436179 C8.32879385,10.1435397 8.21278051,10.1546458 8.24808205,10.0284894 M14.2105672,10.5134056 C14.1481774,10.389752 13.9764082,10.2489698 13.9764082,10.2489698 L13.2684031,8.37187486 C13.1214318,8.01608715 12.6887313,7.82837765 12.4999826,7.82837765 L8.78155385,7.82837765 C8.59264718,7.82837765 8.16026256,8.01608715 8.01321231,8.37187486 L7.30504923,10.2489698 C7.30504923,10.2489698 7.13367487,10.389752 7.07073231,10.5134056 C7.00786872,10.6365117 6.93939795,10.7467128 6.93939795,11.5788134 C6.93939795,12.390657 7.10382256,12.6790257 7.30031077,12.7791374 L7.45573231,12.8661877 L7.45573231,13.6198413 C7.45573231,13.8640983 7.51425231,13.9368358 7.74872718,13.9368358 L8.27453846,13.9368358 C8.50869744,13.9368358 8.66656718,13.9377743 8.66656718,13.6935173 L8.66656718,12.9604335 L12.6149692,12.9604335 L12.6149692,13.6935173 C12.6149692,13.9377743 12.7726021,13.9368358 13.006761,13.9368358 L13.5327303,13.9368358 C13.7670472,13.9368358 13.8255672,13.8640983 13.8255672,13.6198413 L13.8255672,12.8661877 L13.9809887,12.7791374 C14.1776349,12.6791039 14.3419015,12.3908134 14.3422175,11.5788134 C14.3422964,10.7467128 14.2737467,10.6365117 14.2105672,10.5134056" id="Fill-4"></path>
                </g>
              </g>
              <text id="空余-车位" font-family="PingFangSC-Semibold, PingFang SC" font-size="10" font-weight="500" line-spacing="12" letter-spacing="0.105263158" fill="#FFFFFF">
                <tspan x="51" y="154">空余</tspan>
                <tspan x="51" y="166">车位</tspan>
              </text>
              <g id="icon/arrow" transform="translate(54.000000, 84.000000)">
                <mask id="mask-2" fill="white">
                  <use xlink:href="#path-1"></use>
                </mask>
                <g id="Clip-2"></g>
                <path d="M19.2451133,5.49180606 L15.2357147,-3.54312354e-05 L15.2357147,2.62116737 L5.66892681,2.62116737 C2.53822284,2.62116737 -7.08624709e-05,5.15946107 -7.08624709e-05,8.29016503 L-7.08624709e-05,19.982827 L5.66892681,19.982827 L5.66892681,10.8727478 C5.66892681,9.44664056 6.82504802,8.29016503 8.25150956,8.29016503 L15.2357147,8.29016503 L15.2357147,10.9836476 L19.2451133,5.49180606 Z" id="Fill-1" fill="#FFFFFF" mask="url(#mask-2)"></path>
              </g>
              <g id="编组-5" transform="translate(171.000000, 92.000000) scale(1, -1) rotate(90.000000) translate(-171.000000, -92.000000) translate(116.500000, 1.000000)" fill="#00FFF3">
                <path d="M107.5,62.4697945 L107.5,70.4697945 L91,70.4697945 L91,163.499795 L108.5,163.5 L108.5,171.5 L63.499,171.499795 L63.5,181.969795 L53.5,181.969795 L53.499,171.499795 L9.5,171.5 L9.499,50.9997945 L0.5,51 L0.5,43 L9.499,42.9997945 L9.5,0.469794546 L17.5,0.469794546 L17.499,42.9997945 L17.5,43 L17.5,51 L17.499,50.9997945 L17.499,62.4697945 L107.5,62.4697945 Z M83,163.499795 L83,70.4697945 L17.499,70.4697945 L17.499,163.499795 L83,163.499795 Z" id="形状结合"></path>
              </g>
            </g>
            <g id="编组-3" transform="translate(279.000000, 29.000000)" fill="#FFFFFF">
              <polygon id="矩形" transform="translate(14.486743, 40.000000) rotate(-315.000000) translate(-14.486743, -40.000000) " points="3.9993946 30 24.9740913 38.2323814 13.5790421 39.6089984 13.2064727 50"></polygon>
              <text id="西" font-family="PingFangSC-Regular, PingFang SC" font-size="14" font-weight="normal" letter-spacing="0.147368421">
                <tspan x="6.9993946" y="15">西</tspan>
              </text>
            </g>
            <path d="M140.221712,136 L140.221,138.642 L143,138.642977 L143,143.357023 L140.221,143.357 L140.221712,146 L135,141 L140.221712,136 Z" id="形状结合" fill="#8FFFE5" transform="translate(139.000000, 141.000000) scale(1, -1) rotate(90.000000) translate(-139.000000, -141.000000) "></path>
            <text id="员工停车场" font-family="PingFangSC-Semibold, PingFang SC" font-size="7" font-weight="500" letter-spacing="0.0736842105" fill="#FFFFFF">
              <tspan x="121.315789" y="152">员工停车场</tspan>
            </text>
            <g id="编组-6" transform="translate(116.000000, 157.000000)">
              <rect id="矩形备份" stroke="#FAF82C" fill="#010302" x="0.5" y="0.5" width="46" height="17"></rect>
              <text v-if="P2LeftPortShow==0" id="018" font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#04F60F">
                <tspan x="11" y="14.5">{{P2LeftPort}}</tspan>
              </text>
              <text v-if="P2LeftPortShow==1" id="018" font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#04F60F">
                <tspan x="14" y="14.5">{{P2LeftPort}}</tspan>
              </text>
              <text v-if="P2LeftPortShow==2" id="018" font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#FF0000">
                <tspan x="14" y="14.5">{{P2LeftPort}}</tspan>
              </text>
              <text v-if="P2LeftPortShow==3" id="018" font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#FF0000">
                <tspan x="18" y="14.5">{{P2LeftPort}}</tspan>
              </text>
            </g>
            <path d="M145.221712,47 L145.221,49.642 L148,49.6429774 L148,54.3570226 L145.221,54.357 L145.221712,57 L140,52 L145.221712,47 Z" id="形状结合备份" fill="#00FFFD" transform="translate(144.000000, 52.000000) scale(-1, -1) rotate(-90.000000) translate(-144.000000, -52.000000) "></path>
            <g id="编组-7" transform="translate(120.000000, 13.000000)">
              <text id="公共停车场" font-family="PingFangSC-Semibold, PingFang SC" font-size="7" font-weight="500" letter-spacing="0.0736842105" fill="#FFFFFF">
                <tspan x="6.31578947" y="7">公共停车场</tspan>
              </text>
              <g id="编组" transform="translate(0.000000, 12.000000)">
                <rect id="矩形" stroke="#FAF82C" fill="#010302" x="0.5" y="0.5" width="46" height="17"></rect>
                <text v-if="P1LeftPortShow==0" id="218" font-family="PingFangSC-Semibold, PingFang SC" font-size="15" font-weight="500" line-spacing="16" letter-spacing="0.157894737" fill="#04F60F">
                  <tspan x="9" y="14.5">{{P1LeftPort}}</tspan>
                </text>
                <text v-if="P1LeftPortShow==1" id="218" font-family="PingFangSC-Semibold, PingFang SC" font-size="15" font-weight="500" line-spacing="16" letter-spacing="0.157894737" fill="#04F60F">
                  <tspan x="14.5" y="14.5">{{P1LeftPort}}</tspan>
                </text>
                <text v-if="P1LeftPortShow==2" id="218" font-family="PingFangSC-Semibold, PingFang SC" font-size="15" font-weight="500" line-spacing="16" letter-spacing="0.157894737" fill="#FF0000">
                  <tspan x="14.5" y="14.5">{{P1LeftPort}}</tspan>
                </text>
                <text v-if="P1LeftPortShow==3" id="218" font-family="PingFangSC-Semibold, PingFang SC" font-size="15" font-weight="500" line-spacing="16" letter-spacing="0.157894737" fill="#FF0000">
                  <tspan x="19" y="14.5">{{P1LeftPort}}</tspan>
                </text>
              </g>
            </g>
            <path d="M189.221712,87 L189.221,89.642 L192,89.6429774 L192,94.3570226 L189.221,94.357 L189.221712,97 L184,92 L189.221712,87 Z" id="形状结合备份-2" fill="#00FFFD"></path>
            <g id="编组-8" transform="translate(215.000000, 87.000000)">
              <rect id="矩形备份" stroke="#FAF82C" fill="#010302" transform="translate(23.500000, 21.000000) rotate(-360.000000) translate(-23.500000, -21.000000) " x="0.5" y="12.5" width="46" height="17"></rect>
              <text v-if="P4LeftPortShow==0" id="218备份" transform="translate(23.000000, 20.000000) rotate(-360.000000) translate(-23.000000, -20.000000) " font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#04F60F">
                <tspan x="14.5" y="26.5" >
                  {{P4LeftPort}}
                </tspan>
              </text>
              <text v-if="P4LeftPortShow==1" id="218备份" transform="translate(23.000000, 20.000000) rotate(-360.000000) translate(-23.000000, -20.000000) " font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#FF0000">
                <tspan x="14.5" y="26.5" >
                  {{P4LeftPort}}
                </tspan>
              </text>
              <text v-if="P4LeftPortShow==2" id="218备份" transform="translate(23.000000, 20.000000) rotate(-360.000000) translate(-23.000000, -20.000000) " font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#FF0000">
                <tspan x="19" y="26.5" >
                  {{P4LeftPort}}
                </tspan>
              </text>
              <text id="新能源停车场" font-family="PingFangSC-Semibold, PingFang SC" font-size="7" font-weight="500" letter-spacing="0.0736842105" fill="#FFFFFF">
                <tspan x="2.27894737" y="7">新能源停车场</tspan>
              </text>
            </g>
            <g id="编组-9" transform="translate(134.000000, 79.000000)">
              <text id="专用停车场" transform="translate(23.000000, 4.500000) rotate(-360.000000) translate(-23.000000, -4.500000) " font-family="PingFangSC-Semibold, PingFang SC" font-size="7" font-weight="500" letter-spacing="0.0736842105" fill="#FFFFFF">
                <tspan x="5.31578947" y="7">专用停车场</tspan>
              </text>
              <rect id="矩形备份" stroke="#FAF82C" fill="#010302" transform="translate(23.500000, 21.000000) rotate(-360.000000) translate(-23.500000, -21.000000) " x="0.5" y="12.5" width="46" height="17"></rect>
              <text  v-if="P5LeftPortShow==0" id="218备份" transform="translate(23.500000, 20.000000) rotate(-360.000000) translate(-23.500000, -20.000000) " font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#04F60F">
                <tspan x="14" y="26.5">{{P5LeftPort}}</tspan>
              </text>
              <text v-if="P5LeftPortShow==1"  id="218备份" transform="translate(23.500000, 20.000000) rotate(-360.000000) translate(-23.500000, -20.000000) " font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#04F60F">
                <tspan x="19" y="26.5">{{P5LeftPort}}</tspan>
              </text>
              <text  v-if="P5LeftPortShow==2" id="218备份" transform="translate(23.500000, 20.000000) rotate(-360.000000) translate(-23.500000, -20.000000) " font-family="PingFangSC-Semibold, PingFang SC" font-size="14" font-weight="500" line-spacing="14" letter-spacing="0.147368421" fill="#FF0000">
                <tspan x="19" y="26.5">{{P5LeftPort}}</tspan>
              </text>
            </g>
            <path d="M204.221712,109 L204.221,111.642 L207,111.642977 L207,116.357023 L204.221,116.357 L204.221712,119 L199,114 L204.221712,109 Z" id="形状结合备份" fill="#00FFFD" transform="translate(203.000000, 114.000000) scale(1, -1) rotate(-180.000000) translate(-203.000000, -114.000000) "></path>
          </g>
        </g>
      </svg>
    </div>
  </div>
</template>
<script>

    export default {
        name: "induce",
        components: {},
        data() {
            return {
                timer:null,
                P3LeftPort: 0,//47
                P1LeftPort: 0,//158
                P2LeftPort: 0,//110
                P4LeftPort: 0,//28
                P5LeftPort: 0,//14
                //公共停车场158 100-158为0 80-99为1(绿)  10-79为2  0-9为3(红)
                P1LeftPortShow:0,
                //员工停车场110 100-110为0 56-99为1(绿) 10-55为2  0-9为3(红)
                P2LeftPortShow:0,
                //新能源停车场28 15-28为0(绿) 10-14为1 0-9为2(红)
                P4LeftPortShow:0,
                //专用停车场14 10-14为0 8-9为1 (绿) 0-7为2(红)
                P5LeftPortShow:0,
                socailParkName:"社会停车场",
                socailPark:500,
                socailParkLeft:218,
                staffParkName:"员工停车场",
                staffPark:100,
                staffParkLeft:18,
            };
        },
        computed: {
            //顶部员工停车场剩余车位数
            staffLeftPort: function() {
                return (
                    this.P2LeftPort + this.P3LeftPort + this.P4LeftPort + this.P5LeftPort
                );
            },
        },
        created() {
            // 实现轮询
            this.timer = setInterval(() => {
                setTimeout(this.getNewMessage(), 0);
            }, 5000);
        },
        mounted() {
            this.queryParkSpace();
        },
        destroyed() {
            if (this.timer) {
                clearTimeout(this.timer);
                this.timer = null;
            }
        },
        methods: {
            //  定时任务
            getNewMessage() {
                //查询正在进行中的订单
                this.queryParkSpace();
            },

            queryParkSpace() {
                // 公共停车场剩余车位数
                const param1 = "BM01";
                this.$homePage.queryEmptySpace(param1).then(res => {
                    this.P1LeftPort = res.resultEntity;
                    //公共停车场中间顶部数据
                    this.publicLeftPort = res.resultEntity;
                    if (this.P1LeftPort>=100&&this.P1LeftPort<=158)        {
                        this.P1LeftPortShow=0
                    }
                    else if(this.P1LeftPort>=80&&this.P1LeftPort<=99){
                        this.P1LeftPortShow=1
                    }
                    else if(this.P1LeftPort>=10&&this.P1LeftPort<=79){
                        this.P1LeftPortShow=2
                    }
                    else if(this.P1LeftPort>=0&&this.P1LeftPort<=9){
                        this.P1LeftPortShow=3
                    }
                });
                //  员工停车场剩余车位数
                const param2 = "BMK01";
                this.$homePage.queryEmptySpace(param2).then(res => {
                    this.P2LeftPort = res.resultEntity;
                    if (this.P2LeftPort>=100&&this.P2LeftPort<=110)        {
                        this.P2LeftPortShow=0
                    }
                    else if(this.P2LeftPort>=56&&this.P2LeftPort<=99){
                        this.P2LeftPortShow=1
                    }
                    else if(this.P2LeftPort>=10&&this.P2LeftPort<=55){
                        this.P2LeftPortShow=2
                    }
                    else if(this.P2LeftPort>=0&&this.P2LeftPort<=9){
                        this.P2LeftPortShow=3
                    }
                });
                //临时停车场剩余车位数
                const param3 = "HZH01";
                this.$homePage.queryEmptySpace(param3).then(res => {
                    this.P3LeftPort = res.resultEntity;
                });
                //新能源停车场剩余车位数
                const param4 = "JQ01";
                this.$homePage.queryEmptySpace(param4).then(res => {
                    this.P4LeftPort = res.resultEntity;
                    if (this.P4LeftPort>=15&&this.P4LeftPort<=28)        {
                        this.P4LeftPortShow=0
                    }
                    else if(this.P4LeftPort>=10&&this.P4LeftPort<=14){
                        this.P4LeftPortShow=1
                    }
                    else if(this.P4LeftPort>=0&&this.P4LeftPort<=9){
                        this.P4LeftPortShow=2
                    }
                });
                //专用停车场剩余车位数
                const param5 = "SJDA01";
                this.$homePage.queryEmptySpace(param5).then(res => {
                    this.P5LeftPort = res.resultEntity;
                    if (this.P5LeftPort>=10&&this.P5LeftPort<=14)        {
                        this.P5LeftPortShow=0
                    }
                    else if(this.P5LeftPort>=8&&this.P5LeftPort<=9){
                        this.P5LeftPortShow=1
                    }
                    else if(this.P5LeftPort>=0&&this.P5LeftPort<=7){
                        this.P5LeftPortShow=2
                    }
                });
            },
        },
    }
</script>
<style scoped>
  .mainBody{
    width: 100%;
    height: 100%;
    background-color: #f5f6f7;
  }
  .backBody{
    width: 320px;
    height: 192px;
    background-color:#000000;
    position: relative;
    margin-left: 800px;
    margin-top:444px ;
  }

</style>
